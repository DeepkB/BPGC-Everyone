"use strict";String.prototype.endsWithAny=function(...e){return e.some((e=>this.endsWith(e)))},String.prototype.containsAny=function(...e){return e.some((e=>this.includes(e)))};const e=self.registration.scope.includes("127.0.0.1")||self.registration.scope.includes("localhost"),t=e,n=(t,n="white")=>e?console.log(`%c${t}`,`color: black; background-color: ${n};`):"";async function a(e,t,n){n=n.clone();const a=new Headers(n.headers);t.url.includes("/everyone/")?a.set("sw-fetched-on",(new Date).getTime()+864e7):a.set("sw-fetched-on",(new Date).getTime());let s=await n.blob();await e.put(t,new Response(s,{status:n.status,statusText:n.statusText,headers:a}))}self.addEventListener("install",(e=>{e.waitUntil((async()=>{await self.skipWaiting()})())})),self.addEventListener("activate",(e=>{n("Service Worker activated"),e.waitUntil((async()=>{await clients.claim(),await async function(){let e=await caches.keys();await Promise.all(e.map((e=>{if("CACHE-v2.0.0"!=e)return n(`Deleting obsolete cache: '${e}'`,"rgb(255, 128, 128)"),caches.delete(e)})));const t=await caches.open("CACHE-v2.0.0");await t.keys().then((e=>Promise.all(e.map((async e=>function(e){let t=e.headers.get("sw-fetched-on");if(!t)return!0;const n=864e5;return(new Date).getTime()-parseFloat(t)>=n}(await t.match(e))?(console.log(`%cDeleting expired file%c: ${e.url}`,"color: black; background-color: hsl(0, 100%, 75%); font-weight: 900;",""),await t.delete(e)):void console.log(`%cFile is ok%c: ${e.url}`,"color: black; background-color: cyan; font-weight: 900;",""))))))}()})())})),self.addEventListener("fetch",(e=>{e.respondWith(t?fetch(e.request):async function(e){const t=e.request,n=t.url,s=await caches.open("CACHE-v2.0.0");if(n.endsWith(".html")){const e=await s.match(t);return e?(fetch(t).then((e=>{a(s,t,e)})),e):await fetch(t).then((e=>(a(s,t,e),e)))}if(n.includes("swd"))return fetch(t);const c=await s.match(t);if(c)return a(s,t,c),c;return await fetch(t).then((e=>(a(s,t,e),e)))}(e))}));
